define(["esri/layers/Layer","esri/geometry/geometryEngine","esri/geometry/Point","esri/views/2d/layers/BaseLayerView2D","esri/Graphic"],(function(t,e,n,r,i){"use strict";var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function a(t,e){return t(e={exports:{}},e.exports),e.exports}var l=function(t){return t&&t.Math==Math&&t},s=l("object"==typeof globalThis&&globalThis)||l("object"==typeof window&&window)||l("object"==typeof self&&self)||l("object"==typeof o&&o)||Function("return this")(),c=function(t){try{return!!t()}catch(t){return!0}},u=!c((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),f={}.propertyIsEnumerable,h=Object.getOwnPropertyDescriptor,y={f:h&&!f.call({1:2},1)?function(t){var e=h(this,t);return!!e&&e.enumerable}:f},d=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},m={}.toString,p=function(t){return m.call(t).slice(8,-1)},g="".split,v=c((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==p(t)?g.call(t,""):Object(t)}:Object,b=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},w=function(t){return v(b(t))},x=function(t){return"object"==typeof t?null!==t:"function"==typeof t},E=function(t,e){if(!x(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!x(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!x(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!x(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},S={}.hasOwnProperty,P=function(t,e){return S.call(t,e)},O=s.document,A=x(O)&&x(O.createElement),N=function(t){return A?O.createElement(t):{}},T=!u&&!c((function(){return 7!=Object.defineProperty(N("div"),"a",{get:function(){return 7}}).a})),j=Object.getOwnPropertyDescriptor,L={f:u?j:function(t,e){if(t=w(t),e=E(e,!0),T)try{return j(t,e)}catch(t){}if(P(t,e))return d(!y.f.call(t,e),t[e])}},k=function(t){if(!x(t))throw TypeError(String(t)+" is not an object");return t},R=Object.defineProperty,C={f:u?R:function(t,e,n){if(k(t),e=E(e,!0),k(n),T)try{return R(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},I=u?function(t,e,n){return C.f(t,e,d(1,n))}:function(t,e,n){return t[e]=n,t},D=function(t,e){try{I(s,t,e)}catch(n){s[t]=e}return e},M=s["__core-js_shared__"]||D("__core-js_shared__",{}),_=Function.toString;"function"!=typeof M.inspectSource&&(M.inspectSource=function(t){return _.call(t)});var F,U,z,G=M.inspectSource,H=s.WeakMap,B="function"==typeof H&&/native code/.test(G(H)),W=a((function(t){(t.exports=function(t,e){return M[t]||(M[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.5",mode:"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})})),J=0,V=Math.random(),K=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++J+V).toString(36)},q=W("keys"),$=function(t){return q[t]||(q[t]=K(t))},Y={},Q=s.WeakMap;if(B){var Z=new Q,X=Z.get,tt=Z.has,et=Z.set;F=function(t,e){return et.call(Z,t,e),e},U=function(t){return X.call(Z,t)||{}},z=function(t){return tt.call(Z,t)}}else{var nt=$("state");Y[nt]=!0,F=function(t,e){return I(t,nt,e),e},U=function(t){return P(t,nt)?t[nt]:{}},z=function(t){return P(t,nt)}}var rt,it,ot={set:F,get:U,has:z,enforce:function(t){return z(t)?U(t):F(t,{})},getterFor:function(t){return function(e){var n;if(!x(e)||(n=U(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},at=a((function(t){var e=ot.get,n=ot.enforce,r=String(String).split("String");(t.exports=function(t,e,i,o){var a=!!o&&!!o.unsafe,l=!!o&&!!o.enumerable,c=!!o&&!!o.noTargetGet;"function"==typeof i&&("string"!=typeof e||P(i,"name")||I(i,"name",e),n(i).source=r.join("string"==typeof e?e:"")),t!==s?(a?!c&&t[e]&&(l=!0):delete t[e],l?t[e]=i:I(t,e,i)):l?t[e]=i:D(e,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||G(this)}))})),lt=s,st=function(t){return"function"==typeof t?t:void 0},ct=function(t,e){return arguments.length<2?st(lt[t])||st(s[t]):lt[t]&&lt[t][e]||s[t]&&s[t][e]},ut=Math.ceil,ft=Math.floor,ht=function(t){return isNaN(t=+t)?0:(t>0?ft:ut)(t)},yt=Math.min,dt=function(t){return t>0?yt(ht(t),9007199254740991):0},mt=Math.max,pt=Math.min,gt=function(t){return function(e,n,r){var i,o=w(e),a=dt(o.length),l=function(t,e){var n=ht(t);return n<0?mt(n+e,0):pt(n,e)}(r,a);if(t&&n!=n){for(;a>l;)if((i=o[l++])!=i)return!0}else for(;a>l;l++)if((t||l in o)&&o[l]===n)return t||l||0;return!t&&-1}},vt={includes:gt(!0),indexOf:gt(!1)},bt=vt.indexOf,wt=function(t,e){var n,r=w(t),i=0,o=[];for(n in r)!P(Y,n)&&P(r,n)&&o.push(n);for(;e.length>i;)P(r,n=e[i++])&&(~bt(o,n)||o.push(n));return o},xt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Et=xt.concat("length","prototype"),St={f:Object.getOwnPropertyNames||function(t){return wt(t,Et)}},Pt={f:Object.getOwnPropertySymbols},Ot=ct("Reflect","ownKeys")||function(t){var e=St.f(k(t)),n=Pt.f;return n?e.concat(n(t)):e},At=function(t,e){for(var n=Ot(e),r=C.f,i=L.f,o=0;o<n.length;o++){var a=n[o];P(t,a)||r(t,a,i(e,a))}},Nt=/#|\.prototype\./,Tt=function(t,e){var n=Lt[jt(t)];return n==Rt||n!=kt&&("function"==typeof e?c(e):!!e)},jt=Tt.normalize=function(t){return String(t).replace(Nt,".").toLowerCase()},Lt=Tt.data={},kt=Tt.NATIVE="N",Rt=Tt.POLYFILL="P",Ct=Tt,It=L.f,Dt=function(t,e){var n,r,i,o,a,l=t.target,c=t.global,u=t.stat;if(n=c?s:u?s[l]||D(l,{}):(s[l]||{}).prototype)for(r in e){if(o=e[r],i=t.noTargetGet?(a=It(n,r))&&a.value:n[r],!Ct(c?r:l+(u?".":"#")+r,t.forced)&&void 0!==i){if(typeof o==typeof i)continue;At(o,i)}(t.sham||i&&i.sham)&&I(o,"sham",!0),at(n,r,o,t)}},Mt=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},_t=function(t,e,n){if(Mt(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},Ft=function(t){return Object(b(t))},Ut=Array.isArray||function(t){return"Array"==p(t)},zt=!!Object.getOwnPropertySymbols&&!c((function(){return!String(Symbol())})),Gt=zt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Ht=W("wks"),Bt=s.Symbol,Wt=Gt?Bt:Bt&&Bt.withoutSetter||K,Jt=function(t){return P(Ht,t)||(zt&&P(Bt,t)?Ht[t]=Bt[t]:Ht[t]=Wt("Symbol."+t)),Ht[t]},Vt=Jt("species"),Kt=function(t,e){var n;return Ut(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!Ut(n.prototype)?x(n)&&null===(n=n[Vt])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)},qt=[].push,$t=function(t){var e=1==t,n=2==t,r=3==t,i=4==t,o=6==t,a=5==t||o;return function(l,s,c,u){for(var f,h,y=Ft(l),d=v(y),m=_t(s,c,3),p=dt(d.length),g=0,b=u||Kt,w=e?b(l,p):n?b(l,0):void 0;p>g;g++)if((a||g in d)&&(h=m(f=d[g],g,y),t))if(e)w[g]=h;else if(h)switch(t){case 3:return!0;case 5:return f;case 6:return g;case 2:qt.call(w,f)}else if(i)return!1;return o?-1:r||i?i:w}},Yt={forEach:$t(0),map:$t(1),filter:$t(2),some:$t(3),every:$t(4),find:$t(5),findIndex:$t(6)},Qt=ct("navigator","userAgent")||"",Zt=s.process,Xt=Zt&&Zt.versions,te=Xt&&Xt.v8;te?it=(rt=te.split("."))[0]+rt[1]:Qt&&(!(rt=Qt.match(/Edge\/(\d+)/))||rt[1]>=74)&&(rt=Qt.match(/Chrome\/(\d+)/))&&(it=rt[1]);var ee=it&&+it,ne=Jt("species"),re=function(t){return ee>=51||!c((function(){var e=[];return(e.constructor={})[ne]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},ie=Object.defineProperty,oe={},ae=function(t){throw t},le=function(t,e){if(P(oe,t))return oe[t];e||(e={});var n=[][t],r=!!P(e,"ACCESSORS")&&e.ACCESSORS,i=P(e,0)?e[0]:ae,o=P(e,1)?e[1]:void 0;return oe[t]=!!n&&!c((function(){if(r&&!u)return!0;var t={length:-1};r?ie(t,1,{enumerable:!0,get:ae}):t[1]=1,n.call(t,i,o)}))},se=Yt.filter,ce=re("filter"),ue=le("filter");Dt({target:"Array",proto:!0,forced:!ce||!ue},{filter:function(t){return se(this,t,arguments.length>1?arguments[1]:void 0)}});var fe,he=Object.keys||function(t){return wt(t,xt)},ye=u?Object.defineProperties:function(t,e){k(t);for(var n,r=he(e),i=r.length,o=0;i>o;)C.f(t,n=r[o++],e[n]);return t},de=ct("document","documentElement"),me=$("IE_PROTO"),pe=function(){},ge=function(t){return"<script>"+t+"<\/script>"},ve=function(){try{fe=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;ve=fe?function(t){t.write(ge("")),t.close();var e=t.parentWindow.Object;return t=null,e}(fe):((e=N("iframe")).style.display="none",de.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(ge("document.F=Object")),t.close(),t.F);for(var n=xt.length;n--;)delete ve.prototype[xt[n]];return ve()};Y[me]=!0;var be=Object.create||function(t,e){var n;return null!==t?(pe.prototype=k(t),n=new pe,pe.prototype=null,n[me]=t):n=ve(),void 0===e?n:ye(n,e)},we=Jt("unscopables"),xe=Array.prototype;null==xe[we]&&C.f(xe,we,{configurable:!0,value:be(null)});var Ee=function(t){xe[we][t]=!0},Se=Yt.find,Pe=!0,Oe=le("find");"find"in[]&&Array(1).find((function(){Pe=!1})),Dt({target:"Array",proto:!0,forced:Pe||!Oe},{find:function(t){return Se(this,t,arguments.length>1?arguments[1]:void 0)}}),Ee("find");var Ae=function(t,e){var n=[][t];return!!n&&c((function(){n.call(null,e||function(){throw 1},1)}))},Ne=Yt.forEach,Te=Ae("forEach"),je=le("forEach"),Le=Te&&je?[].forEach:function(t){return Ne(this,t,arguments.length>1?arguments[1]:void 0)};Dt({target:"Array",proto:!0,forced:[].forEach!=Le},{forEach:Le});var ke,Re,Ce,Ie={},De=!c((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),Me=$("IE_PROTO"),_e=Object.prototype,Fe=De?Object.getPrototypeOf:function(t){return t=Ft(t),P(t,Me)?t[Me]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?_e:null},Ue=Jt("iterator"),ze=!1;[].keys&&("next"in(Ce=[].keys())?(Re=Fe(Fe(Ce)))!==Object.prototype&&(ke=Re):ze=!0),null==ke&&(ke={}),P(ke,Ue)||I(ke,Ue,(function(){return this}));var Ge={IteratorPrototype:ke,BUGGY_SAFARI_ITERATORS:ze},He=C.f,Be=Jt("toStringTag"),We=function(t,e,n){t&&!P(t=n?t:t.prototype,Be)&&He(t,Be,{configurable:!0,value:e})},Je=Ge.IteratorPrototype,Ve=function(){return this},Ke=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return k(n),function(t){if(!x(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(r),e?t.call(n,r):n.__proto__=r,n}}():void 0),qe=Ge.IteratorPrototype,$e=Ge.BUGGY_SAFARI_ITERATORS,Ye=Jt("iterator"),Qe=function(){return this},Ze=function(t,e,n,r,i,o,a){!function(t,e,n){var r=e+" Iterator";t.prototype=be(Je,{next:d(1,n)}),We(t,r,!1),Ie[r]=Ve}(n,e,r);var l,s,c,u=function(t){if(t===i&&p)return p;if(!$e&&t in y)return y[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},f=e+" Iterator",h=!1,y=t.prototype,m=y[Ye]||y["@@iterator"]||i&&y[i],p=!$e&&m||u(i),g="Array"==e&&y.entries||m;if(g&&(l=Fe(g.call(new t)),qe!==Object.prototype&&l.next&&(Fe(l)!==qe&&(Ke?Ke(l,qe):"function"!=typeof l[Ye]&&I(l,Ye,Qe)),We(l,f,!0))),"values"==i&&m&&"values"!==m.name&&(h=!0,p=function(){return m.call(this)}),y[Ye]!==p&&I(y,Ye,p),Ie[e]=p,i)if(s={values:u("values"),keys:o?p:u("keys"),entries:u("entries")},a)for(c in s)($e||h||!(c in y))&&at(y,c,s[c]);else Dt({target:e,proto:!0,forced:$e||h},s);return s},Xe=ot.set,tn=ot.getterFor("Array Iterator"),en=Ze(Array,"Array",(function(t,e){Xe(this,{type:"Array Iterator",target:w(t),index:0,kind:e})}),(function(){var t=tn(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");Ie.Arguments=Ie.Array,Ee("keys"),Ee("values"),Ee("entries");var nn=Yt.map,rn=re("map"),on=le("map");Dt({target:"Array",proto:!0,forced:!rn||!on},{map:function(t){return nn(this,t,arguments.length>1?arguments[1]:void 0)}});var an=Object.assign,ln=Object.defineProperty,sn=!an||c((function(){if(u&&1!==an({b:1},an(ln({},"a",{enumerable:!0,get:function(){ln(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol();return t[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(t){e[t]=t})),7!=an({},t)[n]||"abcdefghijklmnopqrst"!=he(an({},e)).join("")}))?function(t,e){for(var n=Ft(t),r=arguments.length,i=1,o=Pt.f,a=y.f;r>i;)for(var l,s=v(arguments[i++]),c=o?he(s).concat(o(s)):he(s),f=c.length,h=0;f>h;)l=c[h++],u&&!a.call(s,l)||(n[l]=s[l]);return n}:an;Dt({target:"Object",stat:!0,forced:Object.assign!==sn},{assign:sn});var cn={};cn[Jt("toStringTag")]="z";var un="[object z]"===String(cn),fn=Jt("toStringTag"),hn="Arguments"==p(function(){return arguments}()),yn=un?p:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),fn))?n:hn?p(e):"Object"==(r=p(e))&&"function"==typeof e.callee?"Arguments":r},dn=un?{}.toString:function(){return"[object "+yn(this)+"]"};un||at(Object.prototype,"toString",dn,{unsafe:!0});var mn=!c((function(){return Object.isExtensible(Object.preventExtensions({}))})),pn=a((function(t){var e=C.f,n=K("meta"),r=0,i=Object.isExtensible||function(){return!0},o=function(t){e(t,n,{value:{objectID:"O"+ ++r,weakData:{}}})},a=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!x(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!P(t,n)){if(!i(t))return"F";if(!e)return"E";o(t)}return t[n].objectID},getWeakData:function(t,e){if(!P(t,n)){if(!i(t))return!0;if(!e)return!1;o(t)}return t[n].weakData},onFreeze:function(t){return mn&&a.REQUIRED&&i(t)&&!P(t,n)&&o(t),t}};Y[n]=!0})),gn=(pn.REQUIRED,pn.fastKey,pn.getWeakData,pn.onFreeze,Jt("iterator")),vn=Array.prototype,bn=Jt("iterator"),wn=function(t,e,n,r){try{return r?e(k(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&k(i.call(t)),e}},xn=a((function(t){var e=function(t,e){this.stopped=t,this.result=e};(t.exports=function(t,n,r,i,o){var a,l,s,c,u,f,h,y,d=_t(n,r,i?2:1);if(o)a=t;else{if("function"!=typeof(l=function(t){if(null!=t)return t[bn]||t["@@iterator"]||Ie[yn(t)]}(t)))throw TypeError("Target is not iterable");if(void 0!==(y=l)&&(Ie.Array===y||vn[gn]===y)){for(s=0,c=dt(t.length);c>s;s++)if((u=i?d(k(h=t[s])[0],h[1]):d(t[s]))&&u instanceof e)return u;return new e(!1)}a=l.call(t)}for(f=a.next;!(h=f.call(a)).done;)if("object"==typeof(u=wn(a,d,h.value,i))&&u&&u instanceof e)return u;return new e(!1)}).stop=function(t){return new e(!0,t)}})),En=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t},Sn=Jt("iterator"),Pn=!1;try{var On=0,An={next:function(){return{done:!!On++}},return:function(){Pn=!0}};An[Sn]=function(){return this},Array.from(An,(function(){throw 2}))}catch(t){}var Nn=function(t,e){if(!e&&!Pn)return!1;var n=!1;try{var r={};r[Sn]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n},Tn=function(t,e,n){for(var r in e)at(t,r,e[r],n);return t},jn=Jt("species"),Ln=function(t){var e=ct(t),n=C.f;u&&e&&!e[jn]&&n(e,jn,{configurable:!0,get:function(){return this}})},kn=C.f,Rn=pn.fastKey,Cn=ot.set,In=ot.getterFor,Dn=(function(t,e,n){var r=-1!==t.indexOf("Map"),i=-1!==t.indexOf("Weak"),o=r?"set":"add",a=s[t],l=a&&a.prototype,u=a,f={},h=function(t){var e=l[t];at(l,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(i&&!x(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return i&&!x(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(i&&!x(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})};if(Ct(t,"function"!=typeof a||!(i||l.forEach&&!c((function(){(new a).entries().next()})))))u=n.getConstructor(e,t,r,o),pn.REQUIRED=!0;else if(Ct(t,!0)){var y=new u,d=y[o](i?{}:-0,1)!=y,m=c((function(){y.has(1)})),p=Nn((function(t){new a(t)})),g=!i&&c((function(){for(var t=new a,e=5;e--;)t[o](e,e);return!t.has(-0)}));p||((u=e((function(e,n){En(e,u,t);var i=function(t,e,n){var r,i;return Ke&&"function"==typeof(r=e.constructor)&&r!==n&&x(i=r.prototype)&&i!==n.prototype&&Ke(t,i),t}(new a,e,u);return null!=n&&xn(n,i[o],i,r),i}))).prototype=l,l.constructor=u),(m||g)&&(h("delete"),h("has"),r&&h("get")),(g||d)&&h(o),i&&l.clear&&delete l.clear}f[t]=u,Dt({global:!0,forced:u!=a},f),We(u,t),i||n.setStrong(u,t,r)}("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),{getConstructor:function(t,e,n,r){var i=t((function(t,o){En(t,i,e),Cn(t,{type:e,index:be(null),first:void 0,last:void 0,size:0}),u||(t.size=0),null!=o&&xn(o,t[r],t,n)})),o=In(e),a=function(t,e,n){var r,i,a=o(t),s=l(t,e);return s?s.value=n:(a.last=s={index:i=Rn(e,!0),key:e,value:n,previous:r=a.last,next:void 0,removed:!1},a.first||(a.first=s),r&&(r.next=s),u?a.size++:t.size++,"F"!==i&&(a.index[i]=s)),t},l=function(t,e){var n,r=o(t),i=Rn(e);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==e)return n};return Tn(i.prototype,{clear:function(){for(var t=o(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,u?t.size=0:this.size=0},delete:function(t){var e=o(this),n=l(this,t);if(n){var r=n.next,i=n.previous;delete e.index[n.index],n.removed=!0,i&&(i.next=r),r&&(r.previous=i),e.first==n&&(e.first=r),e.last==n&&(e.last=i),u?e.size--:this.size--}return!!n},forEach:function(t){for(var e,n=o(this),r=_t(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!l(this,t)}}),Tn(i.prototype,n?{get:function(t){var e=l(this,t);return e&&e.value},set:function(t,e){return a(this,0===t?0:t,e)}}:{add:function(t){return a(this,t=0===t?0:t,t)}}),u&&kn(i.prototype,"size",{get:function(){return o(this).size}}),i},setStrong:function(t,e,n){var r=e+" Iterator",i=In(e),o=In(r);Ze(t,e,(function(t,e){Cn(this,{type:r,target:t,state:i(t),kind:e,last:void 0})}),(function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),Ln(e)}}),function(t){return function(e,n){var r,i,o=String(b(e)),a=ht(n),l=o.length;return a<0||a>=l?t?"":void 0:(r=o.charCodeAt(a))<55296||r>56319||a+1===l||(i=o.charCodeAt(a+1))<56320||i>57343?t?o.charAt(a):r:t?o.slice(a,a+2):i-56320+(r-55296<<10)+65536}}),Mn={codeAt:Dn(!1),charAt:Dn(!0)},_n=Mn.charAt,Fn=ot.set,Un=ot.getterFor("String Iterator");Ze(String,"String",(function(t){Fn(this,{type:"String Iterator",string:String(t),index:0})}),(function(){var t,e=Un(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=_n(n,r),e.index+=t.length,{value:t,done:!1})}));var zn={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};for(var Gn in zn){var Hn=s[Gn],Bn=Hn&&Hn.prototype;if(Bn&&Bn.forEach!==Le)try{I(Bn,"forEach",Le)}catch(t){Bn.forEach=Le}}var Wn=Jt("iterator"),Jn=Jt("toStringTag"),Vn=en.values;for(var Kn in zn){var qn=s[Kn],$n=qn&&qn.prototype;if($n){if($n[Wn]!==Vn)try{I($n,Wn,Vn)}catch(t){$n[Wn]=Vn}if($n[Jn]||I($n,Jn,Kn),zn[Kn])for(var Yn in en)if($n[Yn]!==en[Yn])try{I($n,Yn,en[Yn])}catch(t){$n[Yn]=en[Yn]}}}function Qn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Zn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function tr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,l=t[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return er(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return er(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function er(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var nr=function(t){return function(e,n,r,i){Mt(n);var o=Ft(e),a=v(o),l=dt(o.length),s=t?l-1:0,c=t?-1:1;if(r<2)for(;;){if(s in a){i=a[s],s+=c;break}if(s+=c,t?s<0:l<=s)throw TypeError("Reduce of empty array with no initial value")}for(;t?s>=0:l>s;s+=c)s in a&&(i=n(i,a[s],s,o));return i}},rr={left:nr(!1),right:nr(!0)}.left,ir=Ae("reduce"),or=le("reduce",{1:0});Dt({target:"Array",proto:!0,forced:!ir||!or},{reduce:function(t){return rr(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}});var ar=Yt.some,lr=Ae("some"),sr=le("some");Dt({target:"Array",proto:!0,forced:!lr||!sr},{some:function(t){return ar(this,t,arguments.length>1?arguments[1]:void 0)}});var cr=c((function(){he(1)}));Dt({target:"Object",stat:!0,forced:cr},{keys:function(t){return he(Ft(t))}});var ur=function(){var t=k(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e};function fr(t,e){return RegExp(t,e)}var hr,yr,dr={UNSUPPORTED_Y:c((function(){var t=fr("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),BROKEN_CARET:c((function(){var t=fr("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},mr=RegExp.prototype.exec,pr=String.prototype.replace,gr=mr,vr=(hr=/a/,yr=/b*/g,mr.call(hr,"a"),mr.call(yr,"a"),0!==hr.lastIndex||0!==yr.lastIndex),br=dr.UNSUPPORTED_Y||dr.BROKEN_CARET,wr=void 0!==/()??/.exec("")[1];(vr||wr||br)&&(gr=function(t){var e,n,r,i,o=this,a=br&&o.sticky,l=ur.call(o),s=o.source,c=0,u=t;return a&&(-1===(l=l.replace("y","")).indexOf("g")&&(l+="g"),u=String(t).slice(o.lastIndex),o.lastIndex>0&&(!o.multiline||o.multiline&&"\n"!==t[o.lastIndex-1])&&(s="(?: "+s+")",u=" "+u,c++),n=new RegExp("^(?:"+s+")",l)),wr&&(n=new RegExp("^"+s+"$(?!\\s)",l)),vr&&(e=o.lastIndex),r=mr.call(a?n:o,u),a?r?(r.input=r.input.slice(c),r[0]=r[0].slice(c),r.index=o.lastIndex,o.lastIndex+=r[0].length):o.lastIndex=0:vr&&r&&(o.lastIndex=o.global?r.index+r[0].length:e),wr&&r&&r.length>1&&pr.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r});var xr=gr;Dt({target:"RegExp",proto:!0,forced:/./.exec!==xr},{exec:xr});var Er=Jt("species"),Sr=!c((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),Pr="$0"==="a".replace(/./,"$0"),Or=Jt("replace"),Ar=!!/./[Or]&&""===/./[Or]("a","$0"),Nr=!c((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),Tr=function(t,e,n,r){var i=Jt(t),o=!c((function(){var e={};return e[i]=function(){return 7},7!=""[t](e)})),a=o&&!c((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[Er]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return e=!0,null},n[i](""),!e}));if(!o||!a||"replace"===t&&(!Sr||!Pr||Ar)||"split"===t&&!Nr){var l=/./[i],s=n(i,""[t],(function(t,e,n,r,i){return e.exec===xr?o&&!i?{done:!0,value:l.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),{REPLACE_KEEPS_$0:Pr,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:Ar}),u=s[0],f=s[1];at(String.prototype,t,u),at(RegExp.prototype,i,2==e?function(t,e){return f.call(t,this,e)}:function(t){return f.call(t,this)})}r&&I(RegExp.prototype[i],"sham",!0)},jr=Mn.charAt,Lr=function(t,e,n){return e+(n?jr(t,e).length:1)},kr=function(t,e){var n=t.exec;if("function"==typeof n){var r=n.call(t,e);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==p(t))throw TypeError("RegExp#exec called on incompatible receiver");return xr.call(t,e)};Tr("match",1,(function(t,e,n){return[function(e){var n=b(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](String(n))},function(t){var r=n(e,t,this);if(r.done)return r.value;var i=k(t),o=String(this);if(!i.global)return kr(i,o);var a=i.unicode;i.lastIndex=0;for(var l,s=[],c=0;null!==(l=kr(i,o));){var u=String(l[0]);s[c]=u,""===u&&(i.lastIndex=Lr(o,dt(i.lastIndex),a)),c++}return 0===c?null:s}]}));var Rr=Jt("match"),Cr=Jt("species"),Ir=function(t,e){var n,r=k(t).constructor;return void 0===r||null==(n=k(r)[Cr])?e:Mt(n)},Dr=[].push,Mr=Math.min,_r=!c((function(){return!RegExp(4294967295,"y")}));Tr("split",2,(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r,i,o=String(b(this)),a=void 0===n?4294967295:n>>>0;if(0===a)return[];if(void 0===t)return[o];if(!x(r=t)||!(void 0!==(i=r[Rr])?i:"RegExp"==p(r)))return e.call(o,t,a);for(var l,s,c,u=[],f=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),h=0,y=new RegExp(t.source,f+"g");(l=xr.call(y,o))&&!((s=y.lastIndex)>h&&(u.push(o.slice(h,l.index)),l.length>1&&l.index<o.length&&Dr.apply(u,l.slice(1)),c=l[0].length,h=s,u.length>=a));)y.lastIndex===l.index&&y.lastIndex++;return h===o.length?!c&&y.test("")||u.push(""):u.push(o.slice(h)),u.length>a?u.slice(0,a):u}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var i=b(this),o=null==e?void 0:e[t];return void 0!==o?o.call(e,i,n):r.call(String(i),e,n)},function(t,i){var o=n(r,t,this,i,r!==e);if(o.done)return o.value;var a=k(t),l=String(this),s=Ir(a,RegExp),c=a.unicode,u=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(_r?"y":"g"),f=new s(_r?a:"^(?:"+a.source+")",u),h=void 0===i?4294967295:i>>>0;if(0===h)return[];if(0===l.length)return null===kr(f,l)?[l]:[];for(var y=0,d=0,m=[];d<l.length;){f.lastIndex=_r?d:0;var p,g=kr(f,_r?l:l.slice(d));if(null===g||(p=Mr(dt(f.lastIndex+(_r?0:d)),l.length))===y)d=Lr(l,d,c);else{if(m.push(l.slice(y,d)),m.length===h)return m;for(var v=1;v<=g.length-1;v++)if(m.push(g[v]),m.length===h)return m;d=y=p}}return m.push(l.slice(y)),m}]}),!_r);var Fr="\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff",Ur="["+Fr+"]",zr=RegExp("^"+Ur+Ur+"*"),Gr=RegExp(Ur+Ur+"*$"),Hr=function(t){return function(e){var n=String(b(e));return 1&t&&(n=n.replace(zr,"")),2&t&&(n=n.replace(Gr,"")),n}},Br={start:Hr(1),end:Hr(2),trim:Hr(3)},Wr=Br.trim;Dt({target:"String",proto:!0,forced:function(t){return c((function(){return!!Fr[t]()||"âÂá "!="âÂá "[t]()||Fr[t].name!==t}))}("trim")},{trim:function(){return Wr(this)}});var Jr=/"/g;Dt({target:"String",proto:!0,forced:function(t){return c((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}("anchor")},{anchor:function(t){return e="a",n="name",r=t,i=String(b(this)),o="<"+e,""!==n&&(o+=" "+n+'="'+String(r).replace(Jr,"&quot;")+'"'),o+">"+i+"</"+e+">";var e,n,r,i,o}}),Dt({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}});var Vr=vt.includes,Kr=le("indexOf",{ACCESSORS:!0,1:0});function qr(t){var e=t.fontFamily,n=t.fontStyle,r=t.fontWeight,i=t.fontSize;e=e||$r.family,n=n||$r.style,i=i||$r.size,["normal","bold"].includes(r)||(r=parseInt(r)>=700?"bold":$r.weight);var o,a,l,s,c=(e=e.split(",")[0]).match(/([\w\d\s]+)/);return c&&(e=c[0]),a=(o={family:e,style:n,weight:r}).family,l=o.style,s=o.weight,Boolean(Yr.find((function(t){return t.family===a&&t.style===l&&t.weight===s})))||(e=$r.family,n=$r.style,r=$r.weight),{fontFamily:e,fontStyle:n,fontWeight:r,fontSize:i}}Dt({target:"Array",proto:!0,forced:!Kr},{includes:function(t){return Vr(this,t,arguments.length>1?arguments[1]:void 0)}}),Ee("includes");var $r={family:"Arial",style:"normal",weight:"normal",size:"16px"},Yr=[{family:"Abril Fatface",style:"normal",weight:"normal"},{family:"Alegreya",style:"normal",weight:"bold"},{family:"Alegreya",style:"italic",weight:"bold"},{family:"Alegreya",style:"italic",weight:"normal"},{family:"Alegreya",style:"normal",weight:"normal"},{family:"Alegreya Sans",style:"italic",weight:"normal"},{family:"Alegreya SC",style:"normal",weight:"bold"},{family:"Alegreya SC",style:"italic",weight:"normal"},{family:"Alegreya SC",style:"normal",weight:"normal"},{family:"Amarante",style:"normal",weight:"normal"},{family:"Amatic SC",style:"normal",weight:"bold"},{family:"Arial",style:"normal",weight:"bold"},{family:"Arial",style:"italic",weight:"bold"},{family:"Arial",style:"italic",weight:"normal"},{family:"Arial",style:"normal",weight:"normal"},{family:"Arial Unicode MS",style:"normal",weight:"bold"},{family:"Arial Unicode MS",style:"normal",weight:"normal"},{family:"Atomic Age",style:"normal",weight:"normal"},{family:"Audiowide",style:"normal",weight:"normal"},{family:"Avenir Next LT Pro",style:"normal",weight:"bold"},{family:"Avenir Next LT Pro",style:"italic",weight:"bold"},{family:"Avenir Next LT Pro Demi",style:"italic",weight:"normal"},{family:"Avenir Next LT Pro",style:"italic",weight:"normal"},{family:"Avenir Next LT Pro Light",style:"italic",weight:"normal"},{family:"Avenir Next LT Pro",style:"normal",weight:"normal"},{family:"Avenir Next LT Pro Light",style:"italic",weight:"normal"},{family:"Avenir Next LT Pro Light",style:"normal",weight:"normal"},{family:"Avenir Next LT Pro Medium",style:"normal",weight:"bold"},{family:"Avenir Next LT Pro Medium",style:"italic",weight:"bold"},{family:"Avenir Next LT Pro Regular",style:"normal",weight:"bold"},{family:"Avenir Next LT Pro Regular",style:"italic",weight:"bold"},{family:"Avenir Next LT Pro Regular",style:"italic",weight:"normal"},{family:"Avenir Next LT Pro Regular",style:"normal",weight:"normal"},{family:"Belleza",style:"normal",weight:"normal"},{family:"Black Ops One",style:"normal",weight:"normal"},{family:"Cabin Sketch",style:"normal",weight:"bold"},{family:"Cabin Sketch",style:"normal",weight:"normal"},{family:"Coming Soon",style:"normal",weight:"normal"},{family:"CalciteWebCoreIcons",style:"normal",weight:"normal"},{family:"Homemade Apple",style:"normal",weight:"normal"},{family:"IM FELL DW Pica PRO",style:"italic",weight:"normal"},{family:"IM FELL DW Pica PRO",style:"normal",weight:"normal"},{family:"Josefin Sans",style:"normal",weight:"normal"},{family:"Josefin Sans Semibold",style:"italic",weight:"normal"},{family:"Josefin Slab",style:"normal",weight:"bold"},{family:"Josefin Slab",style:"italic",weight:"bold"},{family:"Josefin Slab",style:"italic",weight:"normal"},{family:"Josefin Slab Light",style:"italic",weight:"normal"},{family:"Josefin Slab",style:"normal",weight:"normal"},{family:"Josefin Slab Semibold",style:"italic",weight:"normal"},{family:"Josefin Slab Thin",style:"italic",weight:"normal"},{family:"Just Another Hand",style:"normal",weight:"normal"},{family:"Kranky",style:"normal",weight:"normal"},{family:"Life Savers",style:"normal",weight:"bold"},{family:"Loved By The King",style:"normal",weight:"normal"},{family:"Merriweather",style:"normal",weight:"bold"},{family:"Merriweather",style:"italic",weight:"bold"},{family:"Merriweather",style:"italic",weight:"normal"},{family:"Merriweather",style:"normal",weight:"normal"},{family:"Montserrat",style:"normal",weight:"bold"},{family:"Montserrat",style:"italic",weight:"normal"},{family:"Montserrat Medium",style:"italic",weight:"normal"},{family:"Montserrat",style:"normal",weight:"normal"},{family:"Montserrat Semibold",style:"italic",weight:"normal"},{family:"Noto Sans",style:"normal",weight:"bold"},{family:"Noto Sans",style:"italic",weight:"bold"},{family:"Noto Sans",style:"italic",weight:"normal"},{family:"Noto Sans",style:"normal",weight:"normal"},{family:"Noto Serif",style:"normal",weight:"bold"},{family:"Noto Serif",style:"italic",weight:"bold"},{family:"Noto Serif",style:"italic",weight:"normal"},{family:"Noto Serif",style:"normal",weight:"normal"},{family:"Old Standard TT",style:"normal",weight:"bold"},{family:"Old Standard TT",style:"italic",weight:"normal"},{family:"Old Standard TT",style:"normal",weight:"normal"},{family:"Orbitron",style:"normal",weight:"bold"},{family:"Orbitron",style:"normal",weight:"normal"},{family:"Oregano",style:"italic",weight:"normal"},{family:"Oregano",style:"normal",weight:"normal"},{family:"Oswald",style:"normal",weight:"bold"},{family:"Oswald",style:"normal",weight:"normal"},{family:"Pacifico",style:"normal",weight:"normal"},{family:"Palatino Linotype",style:"normal",weight:"normal"},{family:"Playfair Display Black",style:"normal",weight:"normal"},{family:"Playfair Display",style:"normal",weight:"bold"},{family:"Playfair Display",style:"italic",weight:"bold"},{family:"Playfair Display",style:"italic",weight:"normal"},{family:"Playfair Display",style:"normal",weight:"normal"},{family:"Playfair Display SC",style:"normal",weight:"bold"},{family:"Playfair Display SC",style:"normal",weight:"normal"},{family:"Redressed",style:"normal",weight:"normal"},{family:"Risque",style:"normal",weight:"normal"},{family:"Roboto Condensed",style:"italic",weight:"normal"},{family:"Roboto Condensed Light",style:"italic",weight:"normal"},{family:"Rye",style:"normal",weight:"normal"},{family:"Special Elite",style:"normal",weight:"normal"},{family:"Syncopate",style:"normal",weight:"bold"},{family:"Syncopate",style:"normal",weight:"normal"},{family:"Tangerine",style:"normal",weight:"normal"},{family:"Ubuntu",style:"normal",weight:"bold"},{family:"Ubuntu",style:"italic",weight:"bold"},{family:"Ubuntu Condensed",style:"normal",weight:"normal"},{family:"Ubuntu",style:"italic",weight:"normal"},{family:"Ubuntu Light",style:"normal",weight:"bold"},{family:"Ubuntu Light",style:"italic",weight:"bold"},{family:"Ubuntu Light",style:"italic",weight:"normal"},{family:"Ubuntu Light",style:"normal",weight:"normal"},{family:"Ubuntu Medium",style:"italic",weight:"normal"},{family:"Ubuntu Mono",style:"normal",weight:"bold"},{family:"Ubuntu Mono",style:"italic",weight:"bold"},{family:"Ubuntu Mono",style:"italic",weight:"normal"},{family:"Ubuntu Mono",style:"normal",weight:"normal"},{family:"Ubuntu",style:"normal",weight:"normal"},{family:"UnifrakturCook",style:"normal",weight:"bold"},{family:"Vast Shadow",style:"normal",weight:"normal"},{family:"Walter Turncoat",style:"normal",weight:"normal"}],Qr=function(){function t(e){var n=e.id,r=e.editable,i=void 0!==r&&r,o=e.graphic,a=e.text,l=void 0===a?"":a,s=e.textPlaceholder,c=void 0===s?"":s,u=e.cssClass,f=e.placementHint,h=e.placementAlignments,y=e.onNoteEvent;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Object.assign(this,{id:n,editable:i,graphic:o,text:l,textPlaceholder:c,cssClass:u}),this.onNoteEvent="function"==typeof y?y:function(){},this.anchor=null,this.mapPoint=null,f&&(this.placementHint=new t.Point(f)),this.placementAlignments=h||Object.keys(t.alignmentOctants),this._listeners=[],this._handles=[]}var e,n,r;return e=t,(n=[{key:"destroy",value:function(){this._listeners.forEach((function(t){var e=tr(t,3),n=e[0],r=e[1],i=e[2];return n.removeEventListener(r,i)})),this._listeners=[],this._handles.forEach((function(t){return t.remove()})),this.container&&this.container.parentElement.removeChild(this.container),this.container=null,this.textElement=null}},{key:"addEventListener",value:function(t,e,n){t.addEventListener(e,n),this._listeners.push([t,e,n])}},{key:"focus",value:function(){this.textElement&&this.textElement.focus()}},{key:"focused",value:function(){return this.textElement===document.activeElement}},{key:"hovered",value:function(){return this.container&&this.container.classList.contains("note-hover")}},{key:"selected",value:function(){return this.container&&this.container.classList.contains("note-select")}},{key:"hidden",value:function(){return this.container&&0===parseFloat(this.container.style.opacity)}},{key:"draggable",value:function(){return!0===this.editable}},{key:"setVisibility",value:function(t){this.container&&(this.container.style.opacity=t?1:0,this.container.style.pointerEvents=t?"auto":"none",this.textElement.style.opacity=t?1:0,this.textElement.style.pointerEvents=t?"auto":"none")}},{key:"setHover",value:function(t){if(this.container){var e=this.hovered();t?this.container.classList.add("note-hover"):this.container.classList.remove("note-hover"),t!==e&&this.onNoteEvent("hover",this,{type:"hover"})}}},{key:"setSelect",value:function(t){var e=this.selected();this.container&&(t?this.container.classList.add("note-select"):this.container.classList.remove("note-select"),t!==e&&this.onNoteEvent("select",this,{type:"select"}))}},{key:"setDrag",value:function(t,e){this.dragging=t,this.wasDragged=!1,this.dragging?(this.prevCursor=e.cursor,this.container.style.cursor="grabbing",this.textElement.style.cursor="inherit",e.cursor="grabbing"):(this.container.style.cursor="grab",this.textElement.style.cursor="auto",e.cursor=this.prevCursor)}},{key:"createElements",value:function(t){var e=this;this.container=document.createElement("div"),this.container.style="".concat("\n  position: absolute; /* position notes relative to map container */\n"," ").concat(this.draggable()?"\n  cursor: grab;\n":""),this.cssClass&&this.container.classList.add(this.cssClass),this.textElement=document.createElement("div"),this.textElement.contentEditable=this.editable,this.textElement.innerText=this.text,this.textElement.setAttribute("data-placeholder",this.textPlaceholder),this.textElement.tabIndex=1,this.textElement.style="\n  -webkit-user-select: auto; /* mobile safari needs this for contenteditable to work properly */\n  cursor: auto;\n",this.textElement.classList.add("note-text"),this.container.appendChild(this.textElement),this.addEventListener(this.textElement,"input",(function(n){return e.onInputEvent(n,t)})),this.addEventListener(this.textElement,"paste",(function(n){return e.onPasteEvent(n,t)})),[this.container,this.textElement].forEach((function(t){["keydown","keyup","pointerdown","pointerup","click"].forEach((function(n){e.addEventListener(t,n,(function(t){return t.stopPropagation()}))})),e.addEventListener(t,"pointermove",(function(t){e.dragging||!e.selected()&&!e.hovered()||(t.stopPropagation(),t.preventDefault())})),e.addEventListener(t,"focus",(function(t){e.onNoteEvent("focus",e,t)})),e.addEventListener(t,"blur",(function(t){e.empty=!e.textElement.innerText||0===e.textElement.innerText.length,e.dragging||e.onNoteEvent("blur",e,t)}))})),this.draggable()&&(this.addEventListener(this.container,"pointerdown",(function(){return e.setDrag(!0,t)})),this.addEventListener(this.textElement,"pointerdown",(function(){return e.setDrag(!1,t)})),this.addEventListener(this.container,"pointerup",(function(){var n=e.wasDragged;e.setDrag(!1,t),n||e.focus()})),this.addEventListener(this.textElement,"pointerup",(function(){return e.setDrag(!1,t)})),this.addEventListener(window,"pointerup",(function(){return e.setDrag(!1,t)})),this.addEventListener(window,"pointerleave",(function(){return e.setDrag(!1,t)})),this._handles.push(t.on("pointer-move",(function(n){return e.onDragEvent(n,t)})))),t.surface.appendChild(this.container),this.updatePosition(t)}},{key:"onInputEvent",value:function(t,e){"insertText"!==t.inputType&&"insertParagraph"!==t.inputType||null!=t.data||(this.textElement.innerText=this.text,this.textElement.blur()),this.text=this.textElement.innerText,this.updatePosition(e),this.onNoteEvent("update-text",this,t)}},{key:"onPasteEvent",value:function(t,e){t.stopPropagation(),t.preventDefault();var n=(t.clipboardData||window.clipboardData).getData("Text"),r=window.getSelection(),i=r.getRangeAt(0);i&&i.insertNode(document.createTextNode(n)),r.removeAllRanges(),this.text=this.textElement.innerText,this.updatePosition(e),this.onNoteEvent("update-text",this,t)}},{key:"onDragEvent",value:function(t,e){this.dragging&&(this.wasDragged=!0,this.anchor=null,this.placementHint=e.toMap(t),this.onNoteEvent("drag",this,t))}},{key:"updatePosition",value:function(t){var e=this.updateMapPoint(t);this.updateTextElement(t),e&&this.onNoteEvent("update-position",this,{type:"update-position"})}},{key:"updateTextElement",value:function(t){if(t.ready){var e=t.toScreen(this.mapPoint);e.x-=this.container.offsetWidth/2,e.y-=this.container.offsetHeight/2,e.x=Math.round(e.x),e.y=Math.round(e.y),this.container.style.left="".concat(e.x,"px"),this.container.style.top="".concat(e.y,"px")}}},{key:"updateMapPoint",value:function(e){var n;null==this.initialZoom&&(this.initialZoom=e.zoom),"point"===this.graphic.geometry.type?n=this.placePointNote(e):"polyline"===this.graphic.geometry.type?n=this.placeLineNote(e):"polygon"===this.graphic.geometry.type&&(n=this.placePolygonNote(e));var r=JSON.stringify(this.mapPoint&&this.mapPoint.toJSON());return this.mapPoint=new t.Point({spatialReference:this.graphic.geometry.spatialReference,x:n.x,y:n.y}),JSON.stringify(this.mapPoint.toJSON())!==r}},{key:"placePointNote",value:function(e){var n=this;this.anchor||(this.anchor=this.graphic.geometry.clone(),this.buffer=[6,3]);var r=[this.container.offsetWidth,this.container.offsetHeight],i=this.graphic.symbol,o="picture-marker"===i.type?[ti(i.width),ti(i.height)]:[ti(i.size+i.outline.width),ti(i.size+i.outline.width)],a=this.placementAlignments.map((function(a){var l=e.toScreen(n.anchor);l.x-=i.xoffset,l.y-=i.yoffset;var s=t.octantOffsets[t.alignmentOctants[a]];l.x+=s[0]*((o[0]+r[0])/2+n.buffer[0]),l.y-=s[1]*((o[1]+r[1])/2+n.buffer[1]);var c=e.toMap(l);return{alignment:a,textPoint:c,dist:n.placementHint?Zr([c.x-n.placementHint.x,c.y-n.placementHint.y]):0}}));if(!this.lastAlignment||!this.focused())if(this.placementHint){var l=tr(a.sort((function(t,e){return t.dist===e.dist?1:t.dist-e.dist})),1)[0];this.lastAlignment=l.alignment}else this.lastAlignment=this.placementAlignments[0];return(a.find((function(t){return t.alignment===n.lastAlignment}))||a[0]).textPoint}},{key:"placeLineNote",value:function(e){if(!this.anchor){var n=this.graphic.geometry,r=this.placementHint;if(r)this.anchor=t.geometryEngine.nearestCoordinate(n,r).coordinate,this.vector=Xr([this.anchor.x-r.x,this.anchor.y-r.y]);else{var i=n.paths[0].reduce((function(t,e){return[t[0]+e[0],t[1]+e[1]]}),[0,0]).map((function(t){return t/n.paths[0].length})),o=t.Point({type:"point",spatialReference:n.spatialReference,x:i[0],y:i[1]});this.anchor=t.geometryEngine.nearestCoordinate(n,o).coordinate;var a=n.paths[0][0],l=n.paths[0][n.paths[0].length-1];this.vector=Xr([-(l[1]-a[1]),l[0]-a[0]])}}return this.computeAnchoredPosition(e)}},{key:"placePolygonNote",value:function(e){if(!this.anchor){var n=this.graphic.geometry,r=this.placementHint;if(!r){var i=n.extent;r=i.width>i.height?{type:"point",x:(i.xmin+i.xmax)/2,y:i.ymin,spatialReference:n.spatialReference}:{type:"point",x:i.xmax,y:(i.ymin+i.ymax)/2,spatialReference:n.spatialReference}}var o={type:"polyline",paths:[n.rings[0]],spatialReference:n.spatialReference};this.anchor=t.geometryEngine.nearestCoordinate(o,r).coordinate,this.vector=Xr([n.centroid.x-this.anchor.x,n.centroid.y-this.anchor.y])}return this.computeAnchoredPosition(e)}},{key:"computeAnchoredPosition",value:function(e){var n=[this.container.offsetWidth,this.container.offsetHeight],r=15;r*=1-Math.min(Math.max(this.initialZoom-e.zoom,0),3)/3*.5;var i={x:this.anchor.x-this.vector[0]*r*e.resolution,y:this.anchor.y-this.vector[1]*r*e.resolution},o=Math.atan2(this.vector[1],this.vector[0]),a=Math.round(8*o/(2*Math.PI)+8)%8,l=t.octantOffsets[a];return i.x-=l[0]*n[0]/2*e.resolution,i.y-=l[1]*n[1]/2*e.resolution,i}},{key:"toGraphic",value:function(t){if(this.text&&this.textElement&&this.mapPoint&&this.anchor){var e=window.getComputedStyle(this.textElement),n=window.getComputedStyle(this.container),r=ei(e,"color")||[0,0,0,255],i=ei(e,"backgroundColor");i&&0!==i[3]||(i=ei(n,"backgroundColor")||r);var o=r.some((function(t,e){return i[e]!==t})),a=qr(e),l={x:t.toScreen(this.mapPoint).x-t.toScreen(this.anchor).x,y:t.toScreen(this.mapPoint).y-t.toScreen(this.anchor).y};return{geometry:this.anchor,symbol:{type:"esriTS",text:this.textElement.innerText,color:r,font:{size:a.fontSize,style:a.fontStyle,weight:a.fontWeight,family:a.fontFamily},haloSize:o?2:0,haloColor:o?i:null,horizontalAlignment:"center",verticalAlignment:"middle",xoffset:l.x,yoffset:-l.y},attributes:{OBJECTID:this.id,text:this.text}}}}}])&&Qn(e.prototype,n),r&&Qn(e,r),t}();function Zr(t){return Math.sqrt(t.map((function(t){return t*t})).reduce((function(t,e){return t+e})))}function Xr(t){var e=Zr(t);return e>0?t.map((function(t){return t/e})):t}function ti(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t/.75}function ei(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=t[e];if(r){var i=r.match(/\((.*)\)/);if(i&&i.length>1){var o=i[1].split(",").map((function(t){return parseFloat(t.trim())}));return o[3]=n&&null!=o[3]?255*o[3]:255,o}}}Zn(Qr,"Point",n),Zn(Qr,"geometryEngine",e),Zn(Qr,"octantOffsets",[[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1],[0,-1],[1,-1]]),Zn(Qr,"alignmentOctants",{right:0,"top-right":1,top:2,"top-left":3,left:4,"bottom-left":5,bottom:6,"bottom-right":7});var ni,ri,ii,oi=s.Promise,ai=/(iphone|ipod|ipad).*applewebkit/i.test(Qt),li=s.location,si=s.setImmediate,ci=s.clearImmediate,ui=s.process,fi=s.MessageChannel,hi=s.Dispatch,yi=0,di={},mi=function(t){if(di.hasOwnProperty(t)){var e=di[t];delete di[t],e()}},pi=function(t){return function(){mi(t)}},gi=function(t){mi(t.data)},vi=function(t){s.postMessage(t+"",li.protocol+"//"+li.host)};si&&ci||(si=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return di[++yi]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},ni(yi),yi},ci=function(t){delete di[t]},"process"==p(ui)?ni=function(t){ui.nextTick(pi(t))}:hi&&hi.now?ni=function(t){hi.now(pi(t))}:fi&&!ai?(ii=(ri=new fi).port2,ri.port1.onmessage=gi,ni=_t(ii.postMessage,ii,1)):!s.addEventListener||"function"!=typeof postMessage||s.importScripts||c(vi)||"file:"===li.protocol?ni="onreadystatechange"in N("script")?function(t){de.appendChild(N("script")).onreadystatechange=function(){de.removeChild(this),mi(t)}}:function(t){setTimeout(pi(t),0)}:(ni=vi,s.addEventListener("message",gi,!1)));var bi,wi,xi,Ei,Si,Pi,Oi,Ai,Ni={set:si,clear:ci},Ti=L.f,ji=Ni.set,Li=s.MutationObserver||s.WebKitMutationObserver,ki=s.process,Ri=s.Promise,Ci="process"==p(ki),Ii=Ti(s,"queueMicrotask"),Di=Ii&&Ii.value;Di||(bi=function(){var t,e;for(Ci&&(t=ki.domain)&&t.exit();wi;){e=wi.fn,wi=wi.next;try{e()}catch(t){throw wi?Ei():xi=void 0,t}}xi=void 0,t&&t.enter()},Ci?Ei=function(){ki.nextTick(bi)}:Li&&!ai?(Si=!0,Pi=document.createTextNode(""),new Li(bi).observe(Pi,{characterData:!0}),Ei=function(){Pi.data=Si=!Si}):Ri&&Ri.resolve?(Oi=Ri.resolve(void 0),Ai=Oi.then,Ei=function(){Ai.call(Oi,bi)}):Ei=function(){ji.call(s,bi)});var Mi,_i,Fi,Ui,zi=Di||function(t){var e={fn:t,next:void 0};xi&&(xi.next=e),wi||(wi=e,Ei()),xi=e},Gi=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=Mt(e),this.reject=Mt(n)},Hi={f:function(t){return new Gi(t)}},Bi=function(t,e){if(k(t),x(e)&&e.constructor===t)return e;var n=Hi.f(t);return(0,n.resolve)(e),n.promise},Wi=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},Ji=Ni.set,Vi=Jt("species"),Ki="Promise",qi=ot.get,$i=ot.set,Yi=ot.getterFor(Ki),Qi=oi,Zi=s.TypeError,Xi=s.document,to=s.process,eo=ct("fetch"),no=Hi.f,ro=no,io="process"==p(to),oo=!!(Xi&&Xi.createEvent&&s.dispatchEvent),ao=Ct(Ki,(function(){if(!(G(Qi)!==String(Qi))){if(66===ee)return!0;if(!io&&"function"!=typeof PromiseRejectionEvent)return!0}if(ee>=51&&/native code/.test(Qi))return!1;var t=Qi.resolve(1),e=function(t){t((function(){}),(function(){}))};return(t.constructor={})[Vi]=e,!(t.then((function(){}))instanceof e)})),lo=ao||!Nn((function(t){Qi.all(t).catch((function(){}))})),so=function(t){var e;return!(!x(t)||"function"!=typeof(e=t.then))&&e},co=function(t,e,n){if(!e.notified){e.notified=!0;var r=e.reactions;zi((function(){for(var i=e.value,o=1==e.state,a=0;r.length>a;){var l,s,c,u=r[a++],f=o?u.ok:u.fail,h=u.resolve,y=u.reject,d=u.domain;try{f?(o||(2===e.rejection&&yo(t,e),e.rejection=1),!0===f?l=i:(d&&d.enter(),l=f(i),d&&(d.exit(),c=!0)),l===u.promise?y(Zi("Promise-chain cycle")):(s=so(l))?s.call(l,h,y):h(l)):y(i)}catch(t){d&&!c&&d.exit(),y(t)}}e.reactions=[],e.notified=!1,n&&!e.rejection&&fo(t,e)}))}},uo=function(t,e,n){var r,i;oo?((r=Xi.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),s.dispatchEvent(r)):r={promise:e,reason:n},(i=s["on"+t])?i(r):"unhandledrejection"===t&&function(t,e){var n=s.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)},fo=function(t,e){Ji.call(s,(function(){var n,r=e.value;if(ho(e)&&(n=Wi((function(){io?to.emit("unhandledRejection",r,t):uo("unhandledrejection",t,r)})),e.rejection=io||ho(e)?2:1,n.error))throw n.value}))},ho=function(t){return 1!==t.rejection&&!t.parent},yo=function(t,e){Ji.call(s,(function(){io?to.emit("rejectionHandled",t):uo("rejectionhandled",t,e.value)}))},mo=function(t,e,n,r){return function(i){t(e,n,i,r)}},po=function(t,e,n,r){e.done||(e.done=!0,r&&(e=r),e.value=n,e.state=2,co(t,e,!0))},go=function(t,e,n,r){if(!e.done){e.done=!0,r&&(e=r);try{if(t===n)throw Zi("Promise can't be resolved itself");var i=so(n);i?zi((function(){var r={done:!1};try{i.call(n,mo(go,t,r,e),mo(po,t,r,e))}catch(n){po(t,r,n,e)}})):(e.value=n,e.state=1,co(t,e,!1))}catch(n){po(t,{done:!1},n,e)}}};ao&&(Qi=function(t){En(this,Qi,Ki),Mt(t),Mi.call(this);var e=qi(this);try{t(mo(go,this,e),mo(po,this,e))}catch(t){po(this,e,t)}},(Mi=function(t){$i(this,{type:Ki,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=Tn(Qi.prototype,{then:function(t,e){var n=Yi(this),r=no(Ir(this,Qi));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=io?to.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&co(this,n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),_i=function(){var t=new Mi,e=qi(t);this.promise=t,this.resolve=mo(go,t,e),this.reject=mo(po,t,e)},Hi.f=no=function(t){return t===Qi||t===Fi?new _i(t):ro(t)},"function"==typeof oi&&(Ui=oi.prototype.then,at(oi.prototype,"then",(function(t,e){var n=this;return new Qi((function(t,e){Ui.call(n,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof eo&&Dt({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return Bi(Qi,eo.apply(s,arguments))}}))),Dt({global:!0,wrap:!0,forced:ao},{Promise:Qi}),We(Qi,Ki,!1),Ln(Ki),Fi=ct(Ki),Dt({target:Ki,stat:!0,forced:ao},{reject:function(t){var e=no(this);return e.reject.call(void 0,t),e.promise}}),Dt({target:Ki,stat:!0,forced:ao},{resolve:function(t){return Bi(this,t)}}),Dt({target:Ki,stat:!0,forced:lo},{all:function(t){var e=this,n=no(e),r=n.resolve,i=n.reject,o=Wi((function(){var n=Mt(e.resolve),o=[],a=0,l=1;xn(t,(function(t){var s=a++,c=!1;o.push(void 0),l++,n.call(e,t).then((function(t){c||(c=!0,o[s]=t,--l||r(o))}),i)})),--l||r(o)}));return o.error&&i(o.value),n.promise},race:function(t){var e=this,n=no(e),r=n.reject,i=Wi((function(){var i=Mt(e.resolve);xn(t,(function(t){i.call(e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}});var vo=r.createSubclass({declaredClass:"HubTextNotesLayerView2D",constructor:function(){this._handles=[],this._dirty=!1},attach:function(){var t=this;this.layer.hubNotes.forEach((function(e){return t.addNoteElements(e)})),this._handles.push(this.layer.on("note-add",(function(e){return t.addNoteElements(e.note)}))),this._handles.push(this.layer.on(["note-select","note-drag"],(function(){return t.setDirty(!0)}))),this._handles.push(this.view.watch("extent",(function(){return t.setDirty(!0)})))},detach:function(){this._handles.forEach((function(t){return t.remove()}))},setDirty:function(t){this._dirty=t,this._dirty&&this.requestRender()},addNoteElements:function(t){t.createElements(this.view),this.setDirty(!0)},render:function(){var t=this;this.layer.hubNotes.filter((function(t){return t.empty})).forEach((function(e){return t.layer.removeNoteForGraphic(e.graphic)})),this._dirty&&(this.setDirty(!1),this.layer.updateNotePositions(this.view),this.layer.collideNotes())},hitTest:function(t,e){var n=this.layer.hubNotes.filter((function(t){return!t.hidden()})).filter((function(n){return n.container&&function(t,e){var n=e.x,r=e.y,i=t.parentNode?t.parentNode.getBoundingClientRect():{left:0,top:0},o=t.getBoundingClientRect(),a={left:o.left-i.left,right:o.right-i.left,top:o.top-i.top,bottom:o.bottom-i.top};return n>=a.left&&n<=a.right&&r>=a.top&&r<=a.bottom}(n.container,{x:t,y:e})})),r=n[0]&&new i({geometry:n[0].mapPoint,attributes:{id:n[0].id,text:n[0].text},layer:this.layer,sourceLayer:this.layer});return Promise.resolve(r)}});function bo(t,e){var n=t.getBoundingClientRect(),r=e.getBoundingClientRect();return!(n.right<r.left||n.left>r.right||n.bottom<r.top||n.top>r.bottom)}return t.createSubclass({declaredClass:"HubTextNotesLayer",noteId:0,constructor:function(t){var e=t.editable,n=t.textPlaceholder,r=t.cssClass;Object.assign(this,{editable:e,textPlaceholder:n,cssClass:r}),this.hubNotes=[]},createLayerView:function(t){if("2d"===t.type)return new vo({view:t,layer:this})},onNoteEvent:function(t,e,n){this.emit("note-".concat(t),function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Xn(Object(n),!0).forEach((function(e){Zn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({note:e},n))},addNoteForGraphic:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.text,r=e.placementHint,i=e.placementAlignments,o=new Qr({id:this.noteId++,editable:this.editable,graphic:t,text:n,textPlaceholder:this.textPlaceholder,cssClass:this.cssClass,placementHint:r,placementAlignments:i,onNoteEvent:this.onNoteEvent.bind(this)});return this.hubNotes.push(o),this.emit("note-add",{note:o}),o},removeNoteForGraphic:function(t){var e=this.findNoteForGraphic(t);if(e){this.hubNotes=this.hubNotes.filter((function(t){return t!==e}));var n=e.id;e.destroy(),this.emit("note-remove",{noteId:n,graphic:t})}},findNoteForId:function(t){return this.hubNotes.find((function(e){return e.id===t}))},findNoteForGraphic:function(t){return this.hubNotes.find((function(e){return e.graphic===t}))},setHoveredNoteForGraphic:function(t){var e=this.findNoteForGraphic(t);this.hubNotes.filter((function(t){return t.container})).forEach((function(t){t.setHover(t===e)}))},setSelectedNoteForGraphic:function(t){var e=this.findNoteForGraphic(t);this.hubNotes.filter((function(t){return t.container})).forEach((function(t){t.setSelect(t===e)}))},updateNotePositions:function(t){this.hubNotes.forEach((function(e){return e.updatePosition(t)}))},dragging:function(){return this.hubNotes.filter((function(t){return t.dragging})).length>0},collideNotes:function(){for(var t=this.hubNotes.filter((function(t){return t.container})),e=new Set,n=0;n<t.length;n++){var r=t[n];if(!e.has(r))for(var i=n+1;i<t.length;i++){var o=t[i];bo(r.container,o.container)&&(r.dragging?e.add(o):o.dragging?e.add(r):r.focused()?e.add(o):o.focused()?e.add(r):r.selected()?e.add(o):o.selected()?e.add(r):e.add(n>=i?o:r))}}this.hubNotes.forEach((function(t){return t.setVisibility(!e.has(t))}))},toGraphics:function(t){return this.hubNotes.map((function(e){return e.toGraphic(t)})).filter((function(t){return t}))}})}));
